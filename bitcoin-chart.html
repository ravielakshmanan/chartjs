<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
	<link  rel="stylesheet" type="text/css" href="https://assets.sourcemedia.com/resource/assets/styles/site-fp.min.34e0ea736912796244f617c45fb3d47a.gz.css" />
</head>
<body>

	<!-- <div id="alert">
	    <h3>Please switch to landscape mode to view the interactive graphic.</h3>
	</div> -->
	<div id="chart_div">
	    <h3>Bitcoint Market Price (USD)</h3>
	    <p><b>The wild Bitcoin ride from 2008 to 2018 (No value until August 2010), Source: www.blockchain.com</b></p>
	    <canvas height='300px' id="line_chart"></canvas>
	</div>

	<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.3.3/papaparse.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

	<script>
	    var data_url = 'market-price.csv';
	    
	    var ctx = document.getElementById('line_chart').getContext('2d');
	    
	    Papa.parse(data_url, {
	    download: true,
	    header: true,
	    complete: function(results) {
	             	
		    var data = results.data;
		    var fields = results.meta.fields;
	            var xlabels = [];
	            var col_list = ['Price']
	            var col_dict = {};
	            col_dict['Price'] = 'Bitcoin Price';

	            var iag_colors = ["#e5127d"];

	            var dataset = [];

	            // Fill display properties
	            for(var i in col_list) {
					dataset.push({
	                    'label': col_dict[col_list[i]],
	                    'data': [],
	                    'borderColor': iag_colors[i % iag_colors.length],
	                    'backgroundColor': iag_colors[i % iag_colors.length],
			    		'fill': false,
			    		'borderWidth': 0.5,
			    		'borderDash': [1,2],
			    		'pointBorderWidth': 0,
			    		'pointRadius': 1,
			    		'pointHoverBackgroundColor': "#000000",
	                    'lineTension': 0,
	                    'hidden': true
	                });
	            }

	            // Fill in the data
	            for(var i in data) {
					xlabels.push(data[i]['Time']);
	                for(var j in col_list) {
	                    dataset[j]['data'].push(data[i][col_list[j]]);
	                }
	            } 

	            dataset[0]['hidden'] = false;
	        	// dataset[1]['hidden'] = false;
	        	// dataset[2]['hidden'] = false;

	            var chart = new Chart(ctx, {
	                type: 'line',
	                data: {
	                    labels: xlabels,
	                    datasets: dataset
	                },
	                options: {
	                    tooltips: {
	                        callbacks: {
	                            label: function(tooltipItem, data) {
	                                let label = data.datasets[tooltipItem.datasetIndex].label;
	                                let value = parseFloat(data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index]).toFixed(1).toString() + "$";
	                                return label + ': ' + value;
	                            },
				            	labelColor: function(tooltipItem, chart) {
	                    			return {
	                        			borderColor: 'rgb(255, 0, 0)',
	                                    backgroundColor: 'rgb(255, 0, 0)'
	                                }
	                            },
	                            labelTextColor:function(tooltipItem, chart){
	                                return '#ffffff';
	                            }
	                    	},
							displayColors: false
	                    },
			    		scales: {
	                        yAxes: [{
	                            ticks: {
	                                callback: function(value, index, values) {
	                                    return parseInt(value).toFixed(0).toString() + "$";
	                                }
	                            },
	                            gridLines: {
	                                display: true,
	                                borderDash: [5,5],
	                                lineWidth: 2
	                            }	
	                        }],
				            xAxes: [{
	                            ticks: {
	                                    autoSkip: false,
	                                    display: false
	                            },
	                            gridLines: {
	                                display: false,
	                                borderDash: [5,5],
	                                lineWidth: 2
	                            }
	                       }]
	                    }
	                },
	                responsive: true,
	  				maintainAspectRatio: false
	            });
	    	}
	    });
	    
	   //  $(document).ready(function() {
	   //      var x = document.getElementById("chart_div");
	   //      var alt = document.getElementById("alert");
	   //      alt.style.display = "none";
	   //      if(window.innerHeight > window.innerWidth){
	   //          x.style.display = "none";
	   //          alt.style.display = "block";
	   //      } else {
	   //          x.style.display = "block";
	   //          alt.style.display = "none";
	   //      }
	        
	   //      $( window ).on( "orientationchange", function( event ) {
	   //      	x.style.display = "block";
	   //          alt.style.display = "none";
	   //          if(window.innerHeight > window.innerWidth){
	   //              x.style.display = "none";
	   //              alt.style.display = "block";
	   //          }
	   //      });
	   // });
	</script>

</body>
</html> 